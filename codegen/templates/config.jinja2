"""
DO NOT EDIT THIS FILE. IT IS AUTOGENERATED FROM THE CONFIGURATION FILE
"""
import tomli
import time


class {{ config_name }}:
{%- for key, value in config_dict.items() %}
    {{ key }}: {{ value['type'] }}
{%- endfor %}

    def __init__(self):
        self._last_update = None
        self._update_interval = {{ update_interval }}  # in seconds
        self.update()

    def update(self):
        self._last_update = time.time()
        with open('{{ config_path }}', 'rb') as f:
            config_dict = tomli.load(f)
        {%- for key, value in config_dict.items() %}
        self.{{ key }} = config_dict['config']['{{ key }}']['value']
        {%- endfor %}

    def __getattribute__(self, name):
        if name != "_last_update":
            if object.__getattribute__(self, "_last_update") is None or time.time() - object.__getattribute__(self, "_last_update") > object.__getattribute__(self, "_update_interval"):
                object.__getattribute__(self, "update")()
            return object.__getattribute__(self, name)

    def __repr__(self):
        return f"{self.__class__.__name__}({{ config_dict.keys() | join(", ") }})"

    def __str__(self):
        return f"{self.__class__.__name__}({{ config_dict.keys() | join(", ") }})"

